<!DOCTYPE html>
<html>
  <head>
    <title>Migrating from v0.x to v1.x | Frint</title>
  </head>

  <body>
    <nav class="nav">
      <div class="container">
        <div class="nav-left">
  <a href="/" class="nav-item brand">
    <img alt="Frint" class="dark" src="/img/frint-logo-7a7a7a.png" />
    <img alt="Frint" class="light" src="/img/frint-logo-fff.png" />
  </a>

  <a href="/docs" class="nav-item is-tab">
    Documentation
  </a>

  <a href="/guides" class="nav-item is-tab">
    Guides
  </a>

  <a href="/repl" class="nav-item is-tab">
    REPL
  </a>

  <a href="/about" class="nav-item is-tab">
    About
  </a>
</div>

<div class="nav-right">
  <div class="field nav-item">
    <p class="control has-icon">
      <input id="doc-search-text-box" class="input" type="text" placeholder="Search...">
      <span class="icon is-small">
        <i class="fa fa-search"></i>
      </span>
    </p>
  </div>
</div>

      </div>
    </nav>

    <section class="section">
      <div class="container">
        <div class="columns">
          <div class="column is-one-quarter">
            <div class="menu-container docs">
  <aside class="menu docs">
    <p class="menu-label">
      Quickstart
    </p>

    <ul class="menu-list">
      <li><a href="/guides/hello-world">Hello World</a></li>
    </ul>

    <p class="menu-label">
      Packages
    </p>

    <ul class="menu-list">
      <li><a href="/docs/packages/frint">frint</a></li>
      <li><a href="/docs/packages/frint-model">frint-model</a></li>
      <li><a href="/docs/packages/frint-store">frint-store</a></li>
      <li><a href="/docs/packages/frint-react">frint-react</a></li>
      <li><a href="/docs/packages/frint-react-server">frint-react-server</a></li>
      <li><a href="/docs/packages/frint-router">frint-router</a></li>
      <li><a href="/docs/packages/frint-router-react">frint-router-react</a></li>
      <li><a href="/docs/packages/frint-test-utils">frint-test-utils</a></li>
      <li><a href="/docs/packages/frint-compat">frint-compat</a></li>
      <li><a href="/docs/packages/frint-cli">frint-cli</a></li>
    </ul>

    <p class="menu-label">
      Migration
    </p>

    <ul class="menu-list">
      <li><a href="/docs/migration/v1">Migrating to v1.x</a></li>
      <li><a href="/docs/migration/v2">Migrating to v2.x</a></li>
    </ul>

    <p class="menu-label">
      Contributing
    </p>

    <ul class="menu-list">
      <li><a href="/docs/contributing/maintainers">Maintainers guide</a></li>
    </ul>

    <p class="menu-label">
      Project
    </p>

    <ul class="menu-list">
      <li><a href="/docs/changelog">Changelog</a></li>
    </ul>
  </aside>
</div>

          </div>

          <div class="column content">
            <h1 id="migrating-from-v0-x-to-v1-x">Migrating from v0.x to v1.x</h1>
<p>We are still keeping majority of the API in <code>v0.x</code> backwards compatible with the new <code>v1.x</code>.</p>
<p>But using old API would give you deprecated warnings, and they can be eliminated by following the guide below.</p>
<!-- MarkdownTOC depth=1 autolink=true bracket=round -->
<ul>
<li><a href="#app">app</a></li>
<li><a href="#component">Component</a></li>
<li><a href="#root-components">Root components</a></li>
<li><a href="#proptypes">PropTypes</a></li>
<li><a href="#store">Store</a></li>
<li><a href="#services">Services</a></li>
<li><a href="#factories">Factories</a></li>
<li><a href="#models">Models</a></li>
<li><a href="#maptoprops"><code>mapToProps</code></a></li>
</ul>
<!-- /MarkdownTOC -->
<h2 id="app">app</h2>
<p>Recommended equivalent methods for <code>App</code> instance, introduced in new API:</p>
<table>
<thead>
<tr>
<th>v0.x</th>
<th>v1.x</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>app.getService(name)</code></td>
<td><code>app.get(serviceName)</code></td>
</tr>
<tr>
<td><code>app.getFactory(name)</code></td>
<td><code>app.get(factoryName)</code></td>
</tr>
<tr>
<td><code>app.getModel(name)</code></td>
<td><code>app.get(modelName)</code></td>
</tr>
<tr>
<td><code>app.getStore()</code></td>
<td><code>app.get(&#39;store&#39;)</code></td>
</tr>
<tr>
<td><code>app.getState$()</code></td>
<td><code>app.get(&#39;store&#39;).getState$()</code></td>
</tr>
<tr>
<td><code>app.dispatch(action)</code></td>
<td><code>app.get(&#39;store&#39;).dispatch(action)</code></td>
</tr>
<tr>
<td><code>app.render</code></td>
<td><code>app.get(&#39;component&#39;)</code></td>
</tr>
<tr>
<td><code>app.getWidgets()</code></td>
<td><code>app.getApps$()</code></td>
</tr>
</tbody>
</table>
<h2 id="component">Component</h2>
<h3 id="-v0-x-"><code>v0.x</code></h3>
<pre><code class="lang-js">import { createComponent } from &#39;frint&#39;;

const Root = createComponent({
  render() {
    return (
      &lt;p&gt;Hello World&lt;/p&gt;
    );
  }
});
</code></pre>
<h3 id="-v1-x-"><code>v1.x</code></h3>
<p>Now we use React directly:</p>
<pre><code class="lang-js">import React, { Component } from &#39;react&#39;;

class Root extends Component {
  render() {
    return (
      &lt;p&gt;Hello world&lt;/p&gt;
    );
  }
}
</code></pre>
<p><strong>Note</strong>: Remember that the lifecycle methods in Components need to follow React&#39;s API too now:</p>
<table>
<thead>
<tr>
<th>v0.x - Frint createComponent</th>
<th>v1.x - React Component</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>beforeMount</code></td>
<td><code>componentWillMount</code></td>
</tr>
<tr>
<td><code>afterMount</code></td>
<td><code>componentDidMount</code></td>
</tr>
<tr>
<td><code>beforeUnmount</code></td>
<td><code>componentWillUnmount</code></td>
</tr>
</tbody>
</table>
<h2 id="root-components">Root components</h2>
<h3 id="-v0-x-"><code>v0.x</code></h3>
<pre><code class="lang-js">import { createApp } from &#39;frint&#39;;

const App = createApp({
  name: &#39;MyApp&#39;,
  component: MyComponent
});
</code></pre>
<h3 id="-v1-x-"><code>v1.x</code></h3>
<p>Components are optional in <code>v1.x</code>:</p>
<pre><code class="lang-js">import { createApp } from &#39;frint&#39;;

const App = createApp({
  name: &#39;MyApp&#39;,
  providers: [
    {
      name: &#39;component&#39;,
      useValue: MyRootComponent
    }
  ]
});
</code></pre>
<h2 id="proptypes">PropTypes</h2>
<h3 id="-v0-x-"><code>v0.x</code></h3>
<pre><code class="lang-js">import { PropTypes } from &#39;frint&#39;;
</code></pre>
<h3 id="-v1-x-"><code>v1.x</code></h3>
<p>In React v0.14:</p>
<pre><code class="lang-js">import { PropTypes } from &#39;react&#39;;
</code></pre>
<p>To keep things compatible with React v15+:</p>
<pre><code class="lang-js">import PropTypes from &#39;prop-types&#39;;
</code></pre>
<h2 id="store">Store</h2>
<h3 id="-v0-x-"><code>v0.x</code></h3>
<pre><code class="lang-js">import { createApp, combineReducers } from &#39;frint&#39;;

const rootReducer = combineReducers({
  foo: fooReducer,
  bar: barReducer
});

const App = createApp({
  name: &#39;MyApp&#39;,
  reducer: rootReducer,
  initialState: {}
});

const app = new App();
const store = app.getStore();
</code></pre>
<h3 id="-v1-x-"><code>v1.x</code></h3>
<p>Stores are optional in <code>v1.x</code>:</p>
<pre><code class="lang-js">import { createApp } from &#39;frint&#39;;
import { createStore, combineReducers } from &#39;frint-store&#39;;

const rootReducer = combineReducers({
  foo: fooReducer,
  bar: barReducer
});

const App = createApp({
  name: &#39;MyApp&#39;,
  providers: [
    {
      name: &#39;store&#39;,
      useFactory: function ({ app }) {
        const Store = createStore({
          reducer: rootReducer,
          initialState: {},
          thunkArgument: { app }, // for async actions
        });

        return new Store();
      },
      deps: [&#39;app&#39;]
    }
  ]
});

const store = app.get(&#39;store&#39;);
</code></pre>
<h2 id="services">Services</h2>
<h3 id="-v0-x-"><code>v0.x</code></h3>
<pre><code class="lang-js">import { createApp, createService } from &#39;frint&#39;;

const FooService = createService({
  getAppName() {
    return this.app.getName();
  }
});

const App = createApp({
  name: &#39;MyApp&#39;,
  services: {
    foo: FooService
  }
});

const app = new App();
const foo = app.getService(&#39;foo&#39;);
</code></pre>
<h3 id="-v1-x-"><code>v1.x</code></h3>
<pre><code class="lang-js">import { createApp } from &#39;frint&#39;;

// just a regular ES6-compatible class
class FooService {
  constructor({ app }) {
    this.app = app;
  }

  getAppName() {
    return this.app.getName();
  }
}

const App = createApp({
  name: &#39;MyApp&#39;,
  providers: [
    {
      name: &#39;foo&#39;,
      useClass: FooService,
      cascade: true, // if you want Apps to access it
      deps: [&#39;app&#39;] // values are made available in constructor argument
    }
  ]
});

const app = new App();
const foo = app.get(&#39;foo&#39;);
</code></pre>
<h2 id="factories">Factories</h2>
<h3 id="-v0-x-"><code>v0.x</code></h3>
<pre><code class="lang-js">import { createApp, createFactory } from &#39;frint&#39;;

const BarFactory = createFactory({
  getAppName() {
    return this.app.getName();
  }
});

const App = createApp({
  name: &#39;MyApp&#39;,
  factories: {
    bar: BarFactory
  }
});

const app = new App();
const bar = app.getFactory(&#39;bar&#39;);
</code></pre>
<h3 id="-v1-x-"><code>v1.x</code></h3>
<pre><code class="lang-js">import { createApp } from &#39;frint&#39;;

// just a regular ES6-compatible class
class BarFactory {
  constructor({ app }) {
    this.app = app;
  }

  getAppName() {
    return this.app.getName();
  }
}

const App = createApp({
  name: &#39;MyApp&#39;,
  providers: [
    {
      name: &#39;bar&#39;,
      useClass: BarFactory,
      cascade: true, // if you want Apps to access it
      scoped: true, // means Apps will get a fresh new scoped instance themselves
      deps: [&#39;app&#39;]
    }
  ]
});

const app = new App();
const bar = app.get(&#39;bar&#39;);
</code></pre>
<h2 id="models">Models</h2>
<h3 id="-v0-x-"><code>v0.x</code></h3>
<pre><code class="lang-js">import { createModel, createApp } from &#39;frint&#39;;

const BazModel = createModel({});

const App = createApp({
  name: &#39;MyApp&#39;,
  models: {
    baz: BazModel
  },
  modelAttributes: {
    baz: {
      key: &#39;value&#39;
    }
  }
});

const app = new App();
const baz = app.getModel(&#39;baz&#39;);
</code></pre>
<h3 id="-v1-x-"><code>v1.x</code></h3>
<pre><code class="lang-js">import { createModel, createApp } from &#39;frint&#39;;

const BazModel = createModel({});

const App = createApp({
  name: &#39;MyApp&#39;,
  providers: [
    {
      name: &#39;baz&#39;,
      useFactory: function () {
        return new BazModel({
          key: &#39;value&#39;
        });
      },
      cascade: true
    }
  ]
});

const app = new App();
const baz = app.get(&#39;baz&#39;);
</code></pre>
<h2 id="-maptoprops-"><code>mapToProps</code></h2>
<h3 id="-v0-x-"><code>v0.x</code></h3>
<pre><code class="lang-js">// ./components/Root.js
import { mapToProps, createComponent } from &#39;frint&#39;;
import { Observable } from &#39;rxjs&#39;;

import { addTodo } from &#39;../actions/todos&#39;;

const Root = createComponent({
  render() {
    // ...
  }
});

export default mapToProps({
  state(state) =&gt; ({
    todos: state.todos.records
  }),
  dispatch: {
    handleAddButton: addTodo
  },
  app(app) {
    return {
      appName: app.getName()
    }
  }),
  shared(sharedState) =&gt; ({
    counter: sharedState.SomeOtherAppName[reducerName].someKey
  }),
  services: {
    foo: &#39;foo&#39;
  },
  factories: {
    bar: &#39;bar&#39;
  },
  models: {
    baz: &#39;baz&#39;
  },
  observe(app) {
    return Observable
      .interval(1000)
      .map(x =&gt; ({ interval: x }));
  }
})(Root);
</code></pre>
<h3 id="-v1-x-"><code>v1.x</code></h3>
<p>The usage of <code>mapToProps</code> can be replaced with <code>observe</code>, along with a helper function <code>streamProps</code> for keeping code even shorter:</p>
<pre><code class="lang-js">// ./components/Root.js
import React from &#39;react&#39;;
import { Observable } from &#39;rxjs&#39;;
import { observe, streamProps } from &#39;frint-react&#39;;

import { addTodo } from &#39;../actions/todos&#39;;

const Root = React.createClass({
  render() {
    // ...
  }
});

export default observe(function (app) {
  // We need to return a single Observable from this function.
  // Either manually for greater control, or using `streamProps`:

  return streamProps({}) // default props to start with
    // state
    .set(
      app.get(&#39;store&#39;).getState$(),
      state =&gt; ({ todos: state.todos.records })
    )

    // dispatch
    .setDispatch({
      handleAddButton: addTodo
    }, app.get(&#39;store&#39;))

    // app
    .set(&#39;appName&#39;, app.getName())

    // shared state
    .set(
      app.getAppOnceAvailable$(&#39;SomeOtherAppName&#39;),
      app =&gt; app.get(&#39;store&#39;).getState$(),
      state =&gt; ({ counter: state[reducerName].someKey })
    )

    // services
    .set(&#39;foo&#39;, app.get(&#39;foo&#39;))

    // factories
    .set(&#39;bar&#39;, app.get(&#39;bar&#39;))

    // models
    .set(&#39;baz&#39;, app.get(&#39;baz&#39;))

    // observe
    .set(
      Observable.interval(1000),
      x =&gt; ({ interval: x })
    )

    // return final Observable
    .get$();
})(Root);
</code></pre>

          </div>
        </div>
      </div>
    </section>

    <footer class="footer">
  <div class="container">
    <div class="content has-text-centered">
      <p>
        <strong>FrintJS</strong> by <a href="https://travix.com">Travix International B.V.</a>.
        The source code is licensed under
        <a href="https://github.com/Travix-International/frint/blob/master/LICENSE">MIT</a>.
      </p>
      <p>
        <a class="icon" href="https://github.com/Travix-International/frint">
          <i class="fa fa-github"></i>
        </a>
      </p>
    </div>
  </div>
</footer>


    <style>
  .github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}
</style>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/themes/prism-solarizedlight.min.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
<link rel="stylesheet" href="/css/site.css" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/prism.min.js"></script>
<script src="/js/site.js"></script>

<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript">
docsearch({
  apiKey: '897a7279c47670a5c4b474ee84350387',
  indexName: 'frint.js',
  inputSelector: '#doc-search-text-box',
  debug: false // Set debug to true if you want to inspect the dropdown
});
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-93673400-1', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>
